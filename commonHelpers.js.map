{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst refs = {\n  formEl: document.querySelector('.js-search-form[data-id=\"1\"]'),\n  listEl: document.querySelector('.gallery'),\n};\n\nrefs.formEl.addEventListener('submit', formSubmit);\n\nfunction formSubmit(e) {\n  e.preventDefault();\n\n  const imgName = e.target.elements.query.value;\n  clearGallery();\n\n  searchImage(imgName).then(renderImage).catch(handleError);\n}\n\nfunction searchImage(image) {\n  const params = {\n    q: image,\n    image_type: 'photo',\n    key: '42190247-000e45a6447d3626b5dd5a4c9',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const url = BASE_URL + '?' + new URLSearchParams(params);\n\n  if (params.q === '') {\n    return Promise.reject('Empty search query');\n  }\n\n  return fetch(url).then(res => res.json());\n  //   const url = new URL(BASE_URL);\n  //   url.search = new URLSearchParams(params).toString();\n}\n\nfunction renderImage(data) {\n  const markup = imagesTemplate(data.hits);\n  refs.listEl.innerHTML = markup;\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n\nfunction imageTemplate(img) {\n  const {\n    largeImageURL,\n    likes,\n    views,\n    webformatURL,\n    tags,\n    comments,\n    downloads,\n  } = img;\n  return `<li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n      </a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes</b><br>${likes}</p>\n        <p class=\"info-item\"><b>Views</b><br>${views}</p>\n        <p class=\"info-item\"><b>Comments</b><br>${comments}</p>\n        <p class=\"info-item\"><b>Downloads</b><br>${downloads}</p>\n      </div>\n    </li>`;\n}\n\nfunction clearGallery() {\n  refs.listEl.innerHTML = '';\n}\n\nfunction handleError(error) {\n  console.error('Error:', error);\n  iziToast.error({\n    message: 'An error occurred. Please try again later.',\n  });\n}\n"],"names":["BASE_URL","refs","formSubmit","e","imgName","clearGallery","searchImage","renderImage","handleError","image","params","url","res","data","markup","imagesTemplate","images","imageTemplate","img","largeImageURL","likes","views","webformatURL","tags","comments","downloads","error","iziToast"],"mappings":"svBAKA,MAAMA,EAAW,2BAEXC,EAAO,CACX,OAAQ,SAAS,cAAc,8BAA8B,EAC7D,OAAQ,SAAS,cAAc,UAAU,CAC3C,EAEAA,EAAK,OAAO,iBAAiB,SAAUC,CAAU,EAEjD,SAASA,EAAWC,EAAG,CACrBA,EAAE,eAAc,EAEhB,MAAMC,EAAUD,EAAE,OAAO,SAAS,MAAM,MACxCE,IAEAC,EAAYF,CAAO,EAAE,KAAKG,CAAW,EAAE,MAAMC,CAAW,CAC1D,CAEA,SAASF,EAAYG,EAAO,CAC1B,MAAMC,EAAS,CACb,EAAGD,EACH,WAAY,QACZ,IAAK,qCACL,YAAa,aACb,WAAY,EAChB,EACQE,EAAMX,EAAW,IAAM,IAAI,gBAAgBU,CAAM,EAEvD,OAAIA,EAAO,IAAM,GACR,QAAQ,OAAO,oBAAoB,EAGrC,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,CAG1C,CAEA,SAASL,EAAYM,EAAM,CACzB,MAAMC,EAASC,EAAeF,EAAK,IAAI,EACvCZ,EAAK,OAAO,UAAYa,CAC1B,CAEA,SAASC,EAAeC,EAAQ,CAC9B,OAAOA,EAAO,IAAIC,CAAa,EAAE,KAAK,EAAE,CAC1C,CAEA,SAASA,EAAcC,EAAK,CAC1B,KAAM,CACJ,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,sCAC6BC;AAAA,0CACIG,WAAsBC;AAAA;AAAA;AAAA,+CAGjBH;AAAA,+CACAC;AAAA,kDACGG;AAAA,mDACCC;AAAA;AAAA,UAGnD,CAEA,SAASpB,GAAe,CACtBJ,EAAK,OAAO,UAAY,EAC1B,CAEA,SAASO,EAAYkB,EAAO,CAC1B,QAAQ,MAAM,SAAUA,CAAK,EAC7BC,EAAS,MAAM,CACb,QAAS,4CACb,CAAG,CACH"}