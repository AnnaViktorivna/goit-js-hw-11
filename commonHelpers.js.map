{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst gallerySimpleLightbox = new SimpleLightbox('.js-gallery a.link-item', {\n  /* options */\n  navText: ['←', '→'],\n  closeText: '×',\n  enableKeyboard: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst refs = {\n  formEl: document.querySelector('.js-search-form[data-id=\"1\"]'),\n  listEl: document.querySelector('.js-gallery'),\n  inputEl: document.querySelector('.js-input'),\n  loaderEl: document.querySelector('.js-loader'),\n};\n\nrefs.formEl.addEventListener('submit', formSubmit);\n\nfunction formSubmit(e) {\n  e.preventDefault();\n  const imgName = e.target.elements.query.value;\n  refs.loaderEl.style.display = 'block';\n  clearGallery();\n  searchImage(imgName)\n    .then(renderImage)\n    .then(() => {\n      gallerySimpleLightbox.refresh();\n\n      gallerySimpleLightbox.on('error.simplelightbox', function (e) {\n        console.log(e);\n      });\n    })\n    .catch(handleError)\n    .finally(() => {\n      refs.loaderEl.style.display = 'none';\n      clearInput();\n    });\n}\n\nfunction clearInput() {\n  refs.inputEl.value = null;\n}\n\nfunction searchImage(image) {\n  const params = {\n    q: image,\n    image_type: 'photo',\n    key: '42190247-000e45a6447d3626b5dd5a4c9',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const url = BASE_URL + '?' + new URLSearchParams(params);\n\n  if (params.q === '') {\n    return Promise.reject('Empty search query');\n  }\n\n  return fetch(url)\n    .then(res => res.json())\n    .catch(err => {\n      return (err = iziToast.error({\n        message: 'Sorry, something is wrong! :)',\n      }));\n    });\n}\n\nfunction renderImage(data) {\n  if (data.hits.length === 0) {\n    return iziToast.error({\n      message:\n        'Sorry, there are no images matching your search query. Please try again!',\n    });\n  } else {\n    const markup = imagesTemplate(data.hits);\n    refs.listEl.innerHTML = markup;\n  }\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n\nfunction imageTemplate(img) {\n  const {\n    largeImageURL,\n    likes,\n    views,\n    webformatURL,\n    tags,\n    comments,\n    downloads,\n  } = img;\n\n  return `<li class=\"gallery-item\">\n    <a class=\"link-item\" href=\"${largeImageURL}\"><img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"\"/></a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes</b><br>${likes}</p>\n        <p class=\"info-item\"><b>Views</b><br>${views}</p>\n        <p class=\"info-item\"><b>Comments</b><br>${comments}</p>\n        <p class=\"info-item\"><b>Downloads</b><br>${downloads}</p>\n      </div>\n    </li>`;\n}\n\nfunction clearGallery() {\n  refs.listEl.innerHTML = '';\n}\n\nfunction handleError(error) {\n  console.error('Error:', error);\n  iziToast.error({\n    message: 'An error occurred. Please try again later.',\n  });\n}\n"],"names":["BASE_URL","gallerySimpleLightbox","SimpleLightbox","refs","formSubmit","e","imgName","clearGallery","searchImage","renderImage","handleError","clearInput","image","params","url","res","err","iziToast","data","markup","imagesTemplate","images","imageTemplate","img","largeImageURL","likes","views","webformatURL","tags","comments","downloads","error"],"mappings":"6vBAKA,MAAMA,EAAW,2BAEXC,EAAwB,IAAIC,EAAe,0BAA2B,CAE1E,QAAS,CAAC,IAAK,GAAG,EAClB,UAAW,IACX,eAAgB,GAChB,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEKC,EAAO,CACX,OAAQ,SAAS,cAAc,8BAA8B,EAC7D,OAAQ,SAAS,cAAc,aAAa,EAC5C,QAAS,SAAS,cAAc,WAAW,EAC3C,SAAU,SAAS,cAAc,YAAY,CAC/C,EAEAA,EAAK,OAAO,iBAAiB,SAAUC,CAAU,EAEjD,SAASA,EAAWC,EAAG,CACrBA,EAAE,eAAc,EAChB,MAAMC,EAAUD,EAAE,OAAO,SAAS,MAAM,MACxCF,EAAK,SAAS,MAAM,QAAU,QAC9BI,IACAC,EAAYF,CAAO,EAChB,KAAKG,CAAW,EAChB,KAAK,IAAM,CACVR,EAAsB,QAAO,EAE7BA,EAAsB,GAAG,uBAAwB,SAAUI,EAAG,CAC5D,QAAQ,IAAIA,CAAC,CACrB,CAAO,CACP,CAAK,EACA,MAAMK,CAAW,EACjB,QAAQ,IAAM,CACbP,EAAK,SAAS,MAAM,QAAU,OAC9BQ,GACN,CAAK,CACL,CAEA,SAASA,GAAa,CACpBR,EAAK,QAAQ,MAAQ,IACvB,CAEA,SAASK,EAAYI,EAAO,CAC1B,MAAMC,EAAS,CACb,EAAGD,EACH,WAAY,QACZ,IAAK,qCACL,YAAa,aACb,WAAY,EAChB,EACQE,EAAMd,EAAW,IAAM,IAAI,gBAAgBa,CAAM,EAEvD,OAAIA,EAAO,IAAM,GACR,QAAQ,OAAO,oBAAoB,EAGrC,MAAMC,CAAG,EACb,KAAKC,GAAOA,EAAI,MAAM,EACtB,MAAMC,GACSC,EAAS,MAAM,CAC3B,QAAS,+BACjB,CAAO,CACF,CACL,CAEA,SAASR,EAAYS,EAAM,CACzB,GAAIA,EAAK,KAAK,SAAW,EACvB,OAAOD,EAAS,MAAM,CACpB,QACE,0EACR,CAAK,EACI,CACL,MAAME,EAASC,EAAeF,EAAK,IAAI,EACvCf,EAAK,OAAO,UAAYgB,CACzB,CACH,CAEA,SAASC,EAAeC,EAAQ,CAC9B,OAAOA,EAAO,IAAIC,CAAa,EAAE,KAAK,EAAE,CAC1C,CAEA,SAASA,EAAcC,EAAK,CAC1B,KAAM,CACJ,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA,iCACwBC,oCAAgDG,WAAsBC;AAAA;AAAA,+CAExDH;AAAA,+CACAC;AAAA,kDACGG;AAAA,mDACCC;AAAA;AAAA,UAGnD,CAEA,SAASvB,GAAe,CACtBJ,EAAK,OAAO,UAAY,EAC1B,CAEA,SAASO,EAAYqB,EAAO,CAC1B,QAAQ,MAAM,SAAUA,CAAK,EAC7Bd,EAAS,MAAM,CACb,QAAS,4CACb,CAAG,CACH"}