{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst gallerySimpleLightbox = new SimpleLightbox('.gallery a.link-item', {\n  /* options */\n  navText: ['←', '→'],\n  closeText: '×',\n  enableKeyboard: true,\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captionDelay: 250,\n});\n\nconst refs = {\n  formEl: document.querySelector('.js-search-form[data-id=\"1\"]'),\n  listEl: document.querySelector('.gallery'),\n};\nconst loader = document.querySelector('.loader');\n\nrefs.formEl.addEventListener('submit', formSubmit);\n\nfunction formSubmit(e) {\n  e.preventDefault();\n  const imgName = e.target.elements.query.value;\n  loader.style.display = 'block';\n  clearGallery();\n  searchImage(imgName)\n    .then(renderImage)\n    .then(() => {\n      gallerySimpleLightbox.refresh();\n\n      gallerySimpleLightbox.on('error.simplelightbox', function (e) {\n        console.log(e);\n      });\n    })\n    .catch(handleError);\n}\n\nfunction searchImage(image) {\n  const params = {\n    q: image,\n    image_type: 'photo',\n    key: '42190247-000e45a6447d3626b5dd5a4c9',\n    orientation: 'horizontal',\n    safesearch: true,\n  };\n  const url = BASE_URL + '?' + new URLSearchParams(params);\n\n  if (params.q === '') {\n    return Promise.reject('Empty search query');\n  }\n\n  return fetch(url).then(res => res.json());\n  //   const url = new URL(BASE_URL);\n  //   url.search = new URLSearchParams(params).toString();\n}\n\nfunction renderImage(data) {\n  loader.style.display = 'none';\n  const markup = imagesTemplate(data.hits);\n  refs.listEl.innerHTML = markup;\n}\n\nfunction imagesTemplate(images) {\n  return images.map(imageTemplate).join('');\n}\n\nfunction imageTemplate(img) {\n  const {\n    largeImageURL,\n    likes,\n    views,\n    webformatURL,\n    tags,\n    comments,\n    downloads,\n  } = img;\n  // return `<a href=\"${largeImageURL}\"><img src=\"${webformatURL}\" alt=\"${tags}\" title=\"\"/></a>`;\n  return `<li class=\"gallery-item\">\n    <a class=\"link-item\" href=\"${largeImageURL}\"><img class=\"gallery-img\" src=\"${webformatURL}\" alt=\"${tags}\" title=\"\"/></a>\n      <div class=\"info\">\n        <p class=\"info-item\"><b>Likes</b><br>${likes}</p>\n        <p class=\"info-item\"><b>Views</b><br>${views}</p>\n        <p class=\"info-item\"><b>Comments</b><br>${comments}</p>\n        <p class=\"info-item\"><b>Downloads</b><br>${downloads}</p>\n      </div>\n    </li>`;\n}\n\nfunction clearGallery() {\n  refs.listEl.innerHTML = '';\n}\n\nfunction handleError(error) {\n  loader.style.display = 'none';\n  console.error('Error:', error);\n  iziToast.error({\n    message: 'An error occurred. Please try again later.',\n  });\n}\n"],"names":["BASE_URL","gallerySimpleLightbox","SimpleLightbox","refs","loader","formSubmit","e","imgName","clearGallery","searchImage","renderImage","handleError","image","params","url","res","data","markup","imagesTemplate","images","imageTemplate","img","largeImageURL","likes","views","webformatURL","tags","comments","downloads","error","iziToast"],"mappings":"6vBAKA,MAAMA,EAAW,2BAEXC,EAAwB,IAAIC,EAAe,uBAAwB,CAEvE,QAAS,CAAC,IAAK,GAAG,EAClB,UAAW,IACX,eAAgB,GAChB,aAAc,MACd,gBAAiB,SACjB,aAAc,GAChB,CAAC,EAEKC,EAAO,CACX,OAAQ,SAAS,cAAc,8BAA8B,EAC7D,OAAQ,SAAS,cAAc,UAAU,CAC3C,EACMC,EAAS,SAAS,cAAc,SAAS,EAE/CD,EAAK,OAAO,iBAAiB,SAAUE,CAAU,EAEjD,SAASA,EAAWC,EAAG,CACrBA,EAAE,eAAc,EAChB,MAAMC,EAAUD,EAAE,OAAO,SAAS,MAAM,MACxCF,EAAO,MAAM,QAAU,QACvBI,IACAC,EAAYF,CAAO,EAChB,KAAKG,CAAW,EAChB,KAAK,IAAM,CACVT,EAAsB,QAAO,EAE7BA,EAAsB,GAAG,uBAAwB,SAAUK,EAAG,CAC5D,QAAQ,IAAIA,CAAC,CACrB,CAAO,CACP,CAAK,EACA,MAAMK,CAAW,CACtB,CAEA,SAASF,EAAYG,EAAO,CAC1B,MAAMC,EAAS,CACb,EAAGD,EACH,WAAY,QACZ,IAAK,qCACL,YAAa,aACb,WAAY,EAChB,EACQE,EAAMd,EAAW,IAAM,IAAI,gBAAgBa,CAAM,EAEvD,OAAIA,EAAO,IAAM,GACR,QAAQ,OAAO,oBAAoB,EAGrC,MAAMC,CAAG,EAAE,KAAKC,GAAOA,EAAI,KAAI,CAAE,CAG1C,CAEA,SAASL,EAAYM,EAAM,CACzBZ,EAAO,MAAM,QAAU,OACvB,MAAMa,EAASC,EAAeF,EAAK,IAAI,EACvCb,EAAK,OAAO,UAAYc,CAC1B,CAEA,SAASC,EAAeC,EAAQ,CAC9B,OAAOA,EAAO,IAAIC,CAAa,EAAE,KAAK,EAAE,CAC1C,CAEA,SAASA,EAAcC,EAAK,CAC1B,KAAM,CACJ,cAAAC,EACA,MAAAC,EACA,MAAAC,EACA,aAAAC,EACA,KAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EAEJ,MAAO;AAAA,iCACwBC,oCAAgDG,WAAsBC;AAAA;AAAA,+CAExDH;AAAA,+CACAC;AAAA,kDACGG;AAAA,mDACCC;AAAA;AAAA,UAGnD,CAEA,SAASpB,GAAe,CACtBL,EAAK,OAAO,UAAY,EAC1B,CAEA,SAASQ,EAAYkB,EAAO,CAC1BzB,EAAO,MAAM,QAAU,OACvB,QAAQ,MAAM,SAAUyB,CAAK,EAC7BC,EAAS,MAAM,CACb,QAAS,4CACb,CAAG,CACH"}